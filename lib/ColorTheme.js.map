{"version":3,"sources":["../src/ColorTheme.js"],"names":["Actions","mapStateToProps","colorTheme","mapDispatchToProps","actions","dispatch","ColorTheme","handleColorChange","id","colorArr","props","type","onhandleColorChange","changeTheme","setState","handleBgChange","bgColor","onhandleBgChange","changeBg","handleClick","changeType","changeIndex","handleAddColor","pickerVisible","overlayVisible","handleDeleteColor","toJS","index","state","i","length","colors","indexOf","splice","handleAccept","pickerColor","push","handleCancel","handleChangeComplete","color","hex","renderColorTheme","active","theme","map","curr","background","renderBg","display","propTypes","string","isRequired","array","bool","func","object","defaultProps"],"mappings":"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","file":"ColorTheme.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { PhotoshopPicker } from 'react-color';\nimport * as Actions from './actions';\nimport ColorThemeItem from './components/ColorThemeItem';\nimport BackgroundItem from './components/BackgroundItem';\n\nimport './style.css';\n\nconst mapStateToProps = ({ colorTheme }) => ({ colorTheme });\nconst mapDispatchToProps = dispatch => ({\n  actions: bindActionCreators(Actions, dispatch),\n});\n\nclass ColorTheme extends Component {\n  static propTypes = {\n    type: PropTypes.string.isRequired,\n    theme: PropTypes.array.isRequired,\n    active: PropTypes.bool,\n    onhandleColorChange: PropTypes.func,\n    onhandleBgChange: PropTypes.func,\n    colorTheme: PropTypes.object.isRequired,\n    actions: PropTypes.object.isRequired,\n  };\n\n  static defaultProps = {\n    active: false,\n  };\n\n  constructor() {\n    super();\n    this.state = {\n      pickerVisible: false,\n      colorArr: [],\n      pickerColor: '#D87C7C',\n      overlayVisible: 'none',\n    };\n  }\n\n  handleColorChange = (id, colorArr) => {\n    const { type, actions } = this.props;\n\n    this.props.onhandleColorChange(type, id, colorArr);\n    actions.changeTheme(colorArr);\n    this.setState({\n      colorArr,\n    });\n  };\n\n  handleBgChange = (id, bgColor) => {\n    const { type, actions } = this.props;\n\n    this.props.onhandleBgChange(type, id, bgColor);\n    actions.changeBg(bgColor);\n  };\n\n  handleClick = id => {\n    const { type, actions } = this.props;\n\n    actions.changeType(type);\n    actions.changeIndex(id);\n  };\n\n  handleAddColor = colorArr => {\n    this.setState({\n      colorArr,\n      pickerVisible: true,\n      overlayVisible: 'block',\n    });\n  };\n\n  handleDeleteColor = colors => {\n    const { type, colorTheme, actions } = this.props;\n    const { index } = colorTheme.toJS();\n    const { colorArr } = this.state;\n\n    for (let i = colorArr.length - 1; i >= 0; i--) {\n      if (colors.indexOf(i) !== -1) {\n        colorArr.splice(i, 1);\n      }\n    }\n\n    this.props.onhandleColorChange(type, index, colorArr);\n    actions.changeTheme(colorArr);\n    this.setState({\n      colorArr,\n    });\n  };\n\n  handleAccept = () => {\n    const { type, colorTheme, actions } = this.props;\n    const { index } = colorTheme.toJS();\n    const { colorArr, pickerColor } = this.state;\n    colorArr.push(pickerColor);\n\n    this.props.onhandleColorChange(type, index, colorArr);\n    actions.changeTheme(colorArr);\n    this.setState({\n      colorArr,\n      pickerVisible: false,\n      overlayVisible: 'none',\n    });\n  };\n\n  handleCancel = () => {\n    this.setState({\n      pickerVisible: false,\n      overlayVisible: 'none',\n    });\n  };\n\n  handleChangeComplete = color => {\n    this.setState({\n      pickerColor: color.hex,\n    });\n  };\n\n  renderColorTheme = () => {\n    const { active, type, colorTheme } = this.props;\n    const { index } = colorTheme.toJS();\n\n    return this.props.theme.map((curr, i) => (\n      <ColorThemeItem\n        key={i}\n        id={i}\n        active={active && i === index}\n        disRemove={this.state.pickerVisible}\n        color={curr.color}\n        background={type === 'theme' ? curr.background : ''}\n        onColorChange={this.handleColorChange}\n        onBgChange={this.handleBgChange}\n        onAddChange={this.handleAddColor}\n        onDeleteChange={this.handleDeleteColor}\n        onClickChange={this.handleClick}\n      />\n    ));\n  };\n\n  renderBg = () => {\n    const { colorTheme, active } = this.props;\n    const { index } = colorTheme.toJS();\n\n    return this.props.theme.map((color, i) => (\n      <BackgroundItem\n        key={i}\n        id={i}\n        active={active && i === index}\n        background={color}\n        onBgChange={this.handleBgChange}\n        onClickChange={this.handleClick}\n      />\n    ));\n  };\n\n  render() {\n    const { pickerColor, pickerVisible, overlayVisible } = this.state;\n\n    return (\n      <div className=\"color-theme\">\n        <ul className=\"theme-ul\">\n          {this.props.type === 'bg' ? this.renderBg() : this.renderColorTheme()}\n        </ul>\n        <div\n          className=\"color-picker\"\n          style={{ display: pickerVisible ? 'block' : 'none' }}\n        >\n          <PhotoshopPicker\n            color={pickerColor}\n            header=\"颜色选择器\"\n            onAccept={this.handleAccept}\n            onCancel={this.handleCancel}\n            onChangeComplete={this.handleChangeComplete}\n          />\n        </div>\n        <div style={{ display: overlayVisible }} className=\"overlay\" />\n      </div>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ColorTheme);\n"]}